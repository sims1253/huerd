<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Color Palette Optimization with fixed colors • huerd</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Color Palette Optimization with fixed colors">
<meta name="description" content="Generates color palettes using minimax optimization to maximize the minimum perceptual distance between colors. Features the ability to define fixed colors that are kept throughout the optimization process, multiple optimization algorithms (COBYLA, SANN, DIRECT, Nelder-Mead), multi-objective optimization framework, and a diagnostic dashboard. All optimization performed in the perceptually uniform OKLAB color space with integrated color vision deficiency analysis.">
<meta property="og:description" content="Generates color palettes using minimax optimization to maximize the minimum perceptual distance between colors. Features the ability to define fixed colors that are kept throughout the optimization process, multiple optimization algorithms (COBYLA, SANN, DIRECT, Nelder-Mead), multi-objective optimization framework, and a diagnostic dashboard. All optimization performed in the perceptually uniform OKLAB color space with integrated color vision deficiency analysis.">
<meta property="og:image" content="https://sims1253.github.io/huerd/branch/sims/dev/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">huerd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/introduction-to-huerd.html">Introduction to huerd</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sims1253/huerd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="huerd-">huerd 
<a class="anchor" aria-label="anchor" href="#huerd-"></a>
</h1>
</div>
<!-- badges: start -->

<p>A discrete color palette generator with support for fixed colors, optimized for color vision deficient viewers. Features 4 different optimization algorithms (COBYLA, SANN, DIRECT, Nelder-Mead) and a multi-objective optimization framework for advanced color palette generation.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of huerd from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"sims1253/huerd"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-example">Basic Example<a class="anchor" aria-label="anchor" href="#basic-example"></a>
</h2>
<p>Generate a palette with 5 colors:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">8</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">palette</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- huerd Color Palette (8 colors) --</span></span>
<span><span class="co">#&gt; Colors:</span></span>
<span><span class="co">#&gt; [ 1] #7C0000</span></span>
<span><span class="co">#&gt; [ 2] #001DFF</span></span>
<span><span class="co">#&gt; [ 3] #B1658C</span></span>
<span><span class="co">#&gt; [ 4] #FF0000</span></span>
<span><span class="co">#&gt; [ 5] #FF00FF</span></span>
<span><span class="co">#&gt; [ 6] #FF8100</span></span>
<span><span class="co">#&gt; [ 7] #00F000</span></span>
<span><span class="co">#&gt; [ 8] #00FFFF</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Quality Metrics Summary --</span></span>
<span><span class="co">#&gt; * Min. Perceptual Distance (OKLAB): 0.157</span></span>
<span><span class="co">#&gt; * Optimizer Performance Ratio      : 50.8%</span></span>
<span><span class="co">#&gt; * Min. CVD-Safe Distance (OKLAB)  : 0.079</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Generation Details --</span></span>
<span><span class="co">#&gt; * Optimizer Iterations: 853</span></span>
<span><span class="co">#&gt; * Optimizer Status: NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="constrained-color-palettes">Constrained Color Palettes<a class="anchor" aria-label="anchor" href="#constrained-color-palettes"></a>
</h2>
<p>Include specific colors while optimizing the remaining colors:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  include_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#4A6B8A"</span>, <span class="st">"#E5A04C"</span><span class="op">)</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">palette</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- huerd Color Palette (8 colors) --</span></span>
<span><span class="co">#&gt; Colors:</span></span>
<span><span class="co">#&gt; [ 1] #064B49</span></span>
<span><span class="co">#&gt; [ 2] #4A6B8A</span></span>
<span><span class="co">#&gt; [ 3] #0091D9</span></span>
<span><span class="co">#&gt; [ 4] #FF001D</span></span>
<span><span class="co">#&gt; [ 5] #E5A04C</span></span>
<span><span class="co">#&gt; [ 6] #9EB5D7</span></span>
<span><span class="co">#&gt; [ 7] #7CF993</span></span>
<span><span class="co">#&gt; [ 8] #E0DDFF</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Quality Metrics Summary --</span></span>
<span><span class="co">#&gt; * Min. Perceptual Distance (OKLAB): 0.142</span></span>
<span><span class="co">#&gt; * Optimizer Performance Ratio      : 45.8%</span></span>
<span><span class="co">#&gt; * Min. CVD-Safe Distance (OKLAB)  : 0.119</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Generation Details --</span></span>
<span><span class="co">#&gt; * Optimizer Iterations: 366</span></span>
<span><span class="co">#&gt; * Optimizer Status: NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multi-optimizer-support">Multi-Optimizer Support<a class="anchor" aria-label="anchor" href="#multi-optimizer-support"></a>
</h2>
<p>Choose from 4 different optimization algorithms based on your needs:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># COBYLA: Default deterministic optimizer (fast, reliable)</span></span>
<span><span class="va">cobyla_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">6</span>, optimizer <span class="op">=</span> <span class="st">"nloptr_cobyla"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># SANN: Stochastic simulated annealing (excellent quality)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>  <span class="co"># For reproducibility</span></span>
<span><span class="va">sann_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">6</span>, optimizer <span class="op">=</span> <span class="st">"sann"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># DIRECT: Global optimization (note: may need tuning for some cases)</span></span>
<span><span class="va">direct_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">6</span>, optimizer <span class="op">=</span> <span class="st">"nlopt_direct"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Nelder-Mead: Derivative-free local optimization</span></span>
<span><span class="va">neldermead_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">6</span>, optimizer <span class="op">=</span> <span class="st">"nlopt_neldermead"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"COBYLA:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">cobyla_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; COBYLA: #301200, #5C00D3, #8E2A58, #FF5100, #00ADFF, #C8F746</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"SANN:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">sann_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; SANN: #000900, #121C00, #200074, #A90900, #00CFFF, #A8FF00</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"DIRECT:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">direct_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; DIRECT: #636363, #636363, #636363, #636363, #636363, #636363</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Nelder-Mead:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">neldermead_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Nelder-Mead: #002C7C, #6A0000, #A200FF, #D64600, #FF91FF, #00E956</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multi-objective-framework">Multi-Objective Framework<a class="anchor" aria-label="anchor" href="#multi-objective-framework"></a>
</h2>
<p>The package includes a multi-objective optimization framework that lays the foundation for future enhancements:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Current: Pure distance optimization (default)</span></span>
<span><span class="va">distance_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>distance <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,  <span class="co"># Explicit distance weighting</span></span>
<span>  optimizer <span class="op">=</span> <span class="st">"nloptr_cobyla"</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Future versions will support additional objectives like:</span></span>
<span><span class="co"># weights = c(distance = 0.7, aesthetics = 0.3)</span></span>
<span><span class="co"># weights = c(distance = 0.8, uniformity = 0.2)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">distance_palette</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- huerd Color Palette (6 colors) --</span></span>
<span><span class="co">#&gt; Colors:</span></span>
<span><span class="co">#&gt; [ 1] #003A00</span></span>
<span><span class="co">#&gt; [ 2] #5D00C4</span></span>
<span><span class="co">#&gt; [ 3] #0074FE</span></span>
<span><span class="co">#&gt; [ 4] #F22100</span></span>
<span><span class="co">#&gt; [ 5] #FF85EA</span></span>
<span><span class="co">#&gt; [ 6] #E5FFF7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Quality Metrics Summary --</span></span>
<span><span class="co">#&gt; * Min. Perceptual Distance (OKLAB): 0.209</span></span>
<span><span class="co">#&gt; * Optimizer Performance Ratio      : 57.2%</span></span>
<span><span class="co">#&gt; * Min. CVD-Safe Distance (OKLAB)  : 0.139</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Generation Details --</span></span>
<span><span class="co">#&gt; * Optimizer Iterations: 341</span></span>
<span><span class="co">#&gt; * Optimizer Status: NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="diagnostic-dashboard">Diagnostic Dashboard<a class="anchor" aria-label="anchor" href="#diagnostic-dashboard"></a>
</h2>
<p>Analyze palette quality with a dashboard:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">8</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/plot_palette_analysis.html">plot_palette_analysis</a></span><span class="op">(</span><span class="va">palette</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-dashboard-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="palette-quality-evaluation">Palette Quality Evaluation<a class="anchor" aria-label="anchor" href="#palette-quality-evaluation"></a>
</h2>
<p>Pure data provider for detailed post-hoc analysis:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">8</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">evaluation</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/evaluate_palette.html">evaluate_palette</a></span><span class="op">(</span><span class="va">palette</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Access raw metrics (no subjective scoring)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Minimum distance:"</span>, <span class="va">evaluation</span><span class="op">$</span><span class="va">distances</span><span class="op">$</span><span class="va">min</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Minimum distance: 0.1933694</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Performance ratio:"</span>, <span class="va">evaluation</span><span class="op">$</span><span class="va">distances</span><span class="op">$</span><span class="va">performance_ratio</span> <span class="op">*</span> <span class="fl">100</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Performance ratio: 62.40473 %</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"CVD worst case:"</span>, <span class="va">evaluation</span><span class="op">$</span><span class="va">cvd_safety</span><span class="op">$</span><span class="va">worst_case_min_distance</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; CVD worst case: 0.1472094</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="custom-parameters">Custom Parameters<a class="anchor" aria-label="anchor" href="#custom-parameters"></a>
</h2>
<p>Fine-tune the generation process with advanced options:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  initialization <span class="op">=</span> <span class="st">"harmony"</span>,              <span class="co"># Color harmony-based initialization</span></span>
<span>  init_lightness_bounds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.8</span><span class="op">)</span>,    <span class="co"># Constrain lightness range</span></span>
<span>  max_iterations <span class="op">=</span> <span class="fl">2000</span>,                   <span class="co"># Increased iterations</span></span>
<span>  optimizer <span class="op">=</span> <span class="st">"nloptr_cobyla"</span>,             <span class="co"># Use COBYLA for reliability</span></span>
<span>  progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">palette</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- huerd Color Palette (8 colors) --</span></span>
<span><span class="co">#&gt; Colors:</span></span>
<span><span class="co">#&gt; [ 1] #735500</span></span>
<span><span class="co">#&gt; [ 2] #997600</span></span>
<span><span class="co">#&gt; [ 3] #00935F</span></span>
<span><span class="co">#&gt; [ 4] #8B74E6</span></span>
<span><span class="co">#&gt; [ 5] #D16D8D</span></span>
<span><span class="co">#&gt; [ 6] #91A438</span></span>
<span><span class="co">#&gt; [ 7] #CB96BD</span></span>
<span><span class="co">#&gt; [ 8] #8EF4FF</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Quality Metrics Summary --</span></span>
<span><span class="co">#&gt; * Min. Perceptual Distance (OKLAB): 0.101</span></span>
<span><span class="co">#&gt; * Optimizer Performance Ratio      : 32.7%</span></span>
<span><span class="co">#&gt; * Min. CVD-Safe Distance (OKLAB)  : 0.081</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Generation Details --</span></span>
<span><span class="co">#&gt; * Optimizer Iterations: 650</span></span>
<span><span class="co">#&gt; * Optimizer Status: NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="optimizer-selection-guide">Optimizer Selection Guide<a class="anchor" aria-label="anchor" href="#optimizer-selection-guide"></a>
</h2>
<p>Choose the right optimizer for your use case:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For general use: COBYLA (default)</span></span>
<span><span class="va">general_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">5</span>, optimizer <span class="op">=</span> <span class="st">"nloptr_cobyla"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For highest quality: SANN (stochastic)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">quality_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">5</span>, optimizer <span class="op">=</span> <span class="st">"sann"</span>, max_iterations <span class="op">=</span> <span class="fl">3000</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For scientific reproducibility: DIRECT (note: may need tuning)</span></span>
<span><span class="va">scientific_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">5</span>, optimizer <span class="op">=</span> <span class="st">"nlopt_direct"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For alternative deterministic approach: Nelder-Mead</span></span>
<span><span class="va">alternative_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span><span class="fl">5</span>, optimizer <span class="op">=</span> <span class="st">"nlopt_neldermead"</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"General (COBYLA):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">general_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; General (COBYLA): #1C1D00, #7D0085, #FF0000, #0088FF, #00FF00</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Quality (SANN):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">quality_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Quality (SANN): #000500, #880000, #5F5A95, #FF9F00, #00F9FF</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Scientific (DIRECT):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">scientific_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Scientific (DIRECT): #636363, #636363, #636363, #636363, #636363</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Alternative (Nelder-Mead):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">alternative_palette</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Alternative (Nelder-Mead): #420000, #A000E7, #FF0000, #FF8CFF, #FDFFDB</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="complete-workflow-example">Complete Workflow Example<a class="anchor" aria-label="anchor" href="#complete-workflow-example"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sims1253/huerd" class="external-link">huerd</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Generate brand palette with advanced optimization</span></span>
<span><span class="va">brand_palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/generate_palette.html">generate_palette</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  include_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#1f77b4"</span>, <span class="st">"#ff7f0e"</span><span class="op">)</span>,  <span class="co"># Fixed brand colors</span></span>
<span>  fixed_aesthetic_influence <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  initialization <span class="op">=</span> <span class="st">"harmony"</span>,</span>
<span>  optimizer <span class="op">=</span> <span class="st">"nloptr_cobyla"</span>,                 <span class="co"># Use COBYLA for reliability</span></span>
<span>  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>distance <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,                  <span class="co"># Multi-objective framework</span></span>
<span>  return_metrics <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Preparing for palette generation...</span></span>
<span><span class="co">#&gt; Adapting initialization from fixed colors' aesthetics...</span></span>
<span><span class="co">#&gt; Initializing 6 free colors (method: harmony)...</span></span>
<span><span class="co">#&gt; Optimizing 6 free colors using nloptr_cobyla...</span></span>
<span><span class="co">#&gt; Finalizing palette...</span></span>
<span><span class="co">#&gt; Done.</span></span>
<span></span>
<span><span class="co"># 2. Diagnostic analysis</span></span>
<span><span class="fu"><a href="reference/plot_palette_analysis.html">plot_palette_analysis</a></span><span class="op">(</span><span class="va">brand_palette</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-workflow-1.png" width="100%"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># 3. Quality evaluation</span></span>
<span><span class="va">evaluation</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/evaluate_palette.html">evaluate_palette</a></span><span class="op">(</span><span class="va">brand_palette</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Min distance:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">evaluation</span><span class="op">$</span><span class="va">distances</span><span class="op">$</span><span class="va">min</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Min distance: 0.116</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Performance:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">evaluation</span><span class="op">$</span><span class="va">distances</span><span class="op">$</span><span class="va">performance_ratio</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Performance: 37.3 %</span></span>
<span></span>
<span><span class="co"># 4. CVD accessibility check</span></span>
<span><span class="va">cvd_safe</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/is_cvd_safe.html">is_cvd_safe</a></span><span class="op">(</span><span class="va">brand_palette</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">cvd_safe</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Palette is CVD-accessible\n"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Palette may challenge CVD viewers\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Palette is CVD-accessible</span></span>
<span></span>
<span><span class="co"># 5. CVD simulation for verification</span></span>
<span><span class="va">cvd_simulation</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/simulate_palette_cvd.html">simulate_palette_cvd</a></span><span class="op">(</span><span class="va">brand_palette</span>, cvd_type <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cvd_simulation</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- huerd CVD Simulation Result (Multiple Types, Severity: 1.00) --</span></span>
<span><span class="co">#&gt; Palette for: original</span></span>
<span><span class="co">#&gt;   [ 1] #5B3E6C</span></span>
<span><span class="co">#&gt;   [ 2] #8800A3</span></span>
<span><span class="co">#&gt;   [ 3] #1F77B4</span></span>
<span><span class="co">#&gt;   [ 4] #00A7A7</span></span>
<span><span class="co">#&gt;   [ 5] #BF816E</span></span>
<span><span class="co">#&gt;   [ 6] #FF7F0E</span></span>
<span><span class="co">#&gt;   [ 7] #82C198</span></span>
<span><span class="co">#&gt;   [ 8] #00E9D2</span></span>
<span><span class="co">#&gt; Palette for: protan</span></span>
<span><span class="co">#&gt;   [ 1] #35486E</span></span>
<span><span class="co">#&gt;   [ 2] #0048A7</span></span>
<span><span class="co">#&gt;   [ 3] #5A79B7</span></span>
<span><span class="co">#&gt;   [ 4] #9B9EA7</span></span>
<span><span class="co">#&gt;   [ 5] #90886D</span></span>
<span><span class="co">#&gt;   [ 6] #A59100</span></span>
<span><span class="co">#&gt;   [ 7] #C1B796</span></span>
<span><span class="co">#&gt;   [ 8] #DDDAD1</span></span>
<span><span class="co">#&gt; Palette for: deutan</span></span>
<span><span class="co">#&gt;   [ 1] #3C4A6B</span></span>
<span><span class="co">#&gt;   [ 2] #1453A0</span></span>
<span><span class="co">#&gt;   [ 3] #456CB3</span></span>
<span><span class="co">#&gt;   [ 4] #8890A8</span></span>
<span><span class="co">#&gt;   [ 5] #9F956D</span></span>
<span><span class="co">#&gt;   [ 6] #C4AE05</span></span>
<span><span class="co">#&gt;   [ 7] #B6B09A</span></span>
<span><span class="co">#&gt;   [ 8] #C4C8D4</span></span>
<span><span class="co">#&gt; Palette for: tritan</span></span>
<span><span class="co">#&gt;   [ 1] #594550</span></span>
<span><span class="co">#&gt;   [ 2] #87345E</span></span>
<span><span class="co">#&gt;   [ 3] #00868D</span></span>
<span><span class="co">#&gt;   [ 4] #00ADA7</span></span>
<span><span class="co">#&gt;   [ 5] #CD787C</span></span>
<span><span class="co">#&gt;   [ 6] #FF616D</span></span>
<span><span class="co">#&gt;   [ 7] #77C0B6</span></span>
<span><span class="co">#&gt;   [ 8] #00EEE2</span></span>
<span></span>
<span><span class="co"># 6. Display final palette (colors are brightness-sorted)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">brand_palette</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- huerd Color Palette (8 colors) --</span></span>
<span><span class="co">#&gt; Colors:</span></span>
<span><span class="co">#&gt; [ 1] #5B3E6C</span></span>
<span><span class="co">#&gt; [ 2] #8800A3</span></span>
<span><span class="co">#&gt; [ 3] #1F77B4</span></span>
<span><span class="co">#&gt; [ 4] #00A7A7</span></span>
<span><span class="co">#&gt; [ 5] #BF816E</span></span>
<span><span class="co">#&gt; [ 6] #FF7F0E</span></span>
<span><span class="co">#&gt; [ 7] #82C198</span></span>
<span><span class="co">#&gt; [ 8] #00E9D2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Quality Metrics Summary --</span></span>
<span><span class="co">#&gt; * Min. Perceptual Distance (OKLAB): 0.116</span></span>
<span><span class="co">#&gt; * Optimizer Performance Ratio      : 37.3%</span></span>
<span><span class="co">#&gt; * Min. CVD-Safe Distance (OKLAB)  : 0.090</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; -- Generation Details --</span></span>
<span><span class="co">#&gt; * Optimizer Iterations: 695</span></span>
<span><span class="co">#&gt; * Optimizer Status: NLOPT_XTOL_REACHED: Optimization stopped because xtol_rel or xtol_abs (above) was reached.</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/sims1253/huerd/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/sims1253/huerd/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing huerd</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Maximilian Scholz <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="LICENSE"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License"></a></li>
<li><a href="https://github.com/sims1253/huerd/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/sims1253/huerd/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/sims1253/huerd/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/sims1253/huerd/actions/workflows/test-coverage.yaml/badge.svg" alt="Tests"></a></li>
<li><a href="https://app.codecov.io/gh/sims1253/huerd" class="external-link"><img src="https://codecov.io/gh/sims1253/huerd/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/sims1253/huerd/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/sims1253/huerd/actions/workflows/pkgdown.yaml/badge.svg" alt="GH-Pages"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maximilian Scholz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
